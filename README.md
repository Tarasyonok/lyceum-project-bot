# Telegram бот "Кто ты из мультика"

## О проекте
Проект Telegram бот. Написан с помощью Telegram API.
Есть база данных с тестами, пользователь выбирает один из теста в боте и отвечает на вопросы.
В зависимости от ответов игрока ему выдаётся результат. Ответы на вопросы сохраняются в контексте пользователя,
Таким образом бот работает без ошибок для нескольких пользователей одновременно. Во время игры можно послушать музыку.
Бот сохраняет статистику игрока, можно посмотреть: сколько раз игрок прошёл тесты всего и сколько уникальных,
количество полученных различных результатов и отвеченных вопросов. 

## Где поиграть
Найдите моего бота в Telegram: @LyceumProjectBot

## Как скачать и запустить у себя
```
git clone https://github.com/Tarasyonok/lyceum-project-bot
python3 -m venv venv
pip install -r requirements.txt
nul > .env
echo TOKEN=your_bot_token > .env
python3 main.py
```

## Функционал
У бота есть главное меню. В нём вы можете выбрать игру, посмотреть статистику.  
В любой момент программы вы можете воспользоваться командами `/help` и `/music`.  
`/help` - помощь  
`/music` - случайная музыка

### Игры
После выбора игры бот выведет описание этого теста и начнёт задавать вопросы.
Отвечать на вопросы нужно нажимая на кнопки в чате.
После ответа на один вопрос кнопки будут убраны и появится новый вопрос со своими кнопами.
После ответов на все вопросы теста будет выведен результат, который подсчитывается на ответах игрока.

### Статистика
В статистике покажется сколько игр всего вы сыграли, сколько уникальных игр,
сколько отвечено вопросов и сколько получено разных результатов

### Музыка
По команде /music вам отправиться случайная музыка из списка, который записан в программе.
Для поиска и получения музыки используется API spotify.
Отправляется не полная песня, а только 30 секундный отрезок.
Музыка сделана для того, чтобы продемонстрировать умение работы с API и отправки аудио файлов ботом.

## Реализация
Для реализации взаимодействия бота с пользователем я использую ConversationHandler,
а функции которые должны срабатывать в определённый момент работы бота сделаны при помощи CommandHandler и MessageHandler.

Данные сохраняются в базу данных SQLite. В базе данных есть таблицы для игроков, тестов, вопросов, ответов и результатов.
Для миграций я использую библиотеку alembic.

В папке support есть файл upload_game.py функция upload_game позволяет загрузить тест,
который который записан в формате json.

## Технологии
Технологии, которые были использованы при создании приложения:
* Telegram
* SQLite
* Json
* Аудио и картинки
* Alembic

### Оригинальная идея
В приложении есть несколько оригинальных идей, которые делают моего бота отличным от других похожих.
* Можно послушать музыку во время игры
* Удобный интерфейс ответов на вопросы и помощью инлайн кнопок в чате.
